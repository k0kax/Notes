让我们重新回顾一下monkey的条件语句
```go
if(<条件>)
<结果>
else
<可替代的结果>
```
其抽象AST为
```go
// ---------------------------------------------------if-else--------------------------------------------
type IfExpression struct {
	Token       token.Token
	Condition   Expression
	Consequence *BlockStatement
	Alternative *BlockStatement
}
```
我们无非即使单独处理条件，如果条件成立或不成立，就执行结果或者可替代的结果，他们都是快Block。

Eval新加如对块和If语句的处理
```go
//evaluator.go
func Eval(node ast.Node) object.Object {
	switch node := node.(type) {

	//语句
	case *ast.Program:
		return evalStatements(node.Statements)

	//表达式语句
	case *ast.ExpressionStatement:
		return Eval(node.Expression)

	//整形字面量
	case *ast.IntegerLiteral:
		return &object.Integer{Value: node.Value}

	//布尔型字面量
	case *ast.Boolean:
		return nativeBoolToBooleanObject(node.Value)

	//前缀表达式
	case *ast.PrefixExpression:
		right := Eval(node.Right)
		return evalPrefixExpression(node.Operator, right)

	//中缀表达式
	case *ast.InfixExpression:
		left := Eval(node.Left)
		right := Eval(node.Right)
		return evalInfixExpression(node.Operator, left, right)

	//块
	case *ast.BlockStatement:
		return evalStatements(node.Statements)

	//if语句
	case *ast.IfExpression:
		return evalIfExpression(node)
	}

	return nil
}
```

IF语句的求值函数
```go
// if选择语句的求值
func evalIfExpression(ie *ast.IfExpression) object.Object {
	condition := Eval(ie.Condition)//处理条件

	if isTruthy(condition) {//条件对
		return Eval(ie.Consequence)//执行结果
	} else if ie.Alternative != nil {//条件不对，且备选结果不为空
		return Eval(ie.Alternative)//执行备选结果
	} else {
		return NULL
	}
}

// 辅助函数 判断条件是否成立
func isTruthy(obj object.Object) bool {
	switch obj {
	case NULL:
		return false
	case TRUE:
		return true
	case FALSE:
		return false
	default:
		return true
	}
}
```

编写测试函数
```go
// 测试选择语句
func TestIfElseExpression(t *testing.T) {
	tests := []struct {
		input    string
		expected interface{}
	}{
		{"if (true) { 10 }", 10},
		{"if (false) { 10 }", nil},
		{"if (1) { 10 }", 10},
		{"if (1 < 2) { 10 }", 10},
		{"if (1 > 2) { 10 }", nil},
		{"if (1 > 2) { 10 } else { 20 }", 20},
		{"if (1 < 2) { 10 } else { 20 }", 10},
	}

	for _, tt := range tests {
		evaluated := testEval(tt.input)
		integer, ok := tt.expected.(int)
		if ok {
			testIntegerObject(t, evaluated, int64(integer))
		} else {
			testNullObject(t, evaluated)
		}
	}
}

func testNullObject(t *testing.T, obj object.Object) bool {
	if obj != NULL {
		t.Errorf("object is not NULL. got=%T(%+v)", obj, obj)
		return false
	}
	return true
}
```

测试repl
```go
PS E:\Codes\Go\monkey_Interpreter> go run .\main.go
Hello LAP! This is the Monkey programmimg language!
Feel freee to type in commamds
>> if ((1000 / 2) + 250 * 2 == 1000) { 9999 }
9999
>> if (5 * 5 + 10 > 34) { 99 } else { 100 }
99
>> if (5 * 5 + 10 < 34) { 99 } else { 100 } 
100
>>
```

